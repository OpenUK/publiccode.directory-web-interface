!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("lodash.merge")):"function"==typeof define&&define.amd?define(["exports","lodash.merge"],t):t(e.VuexPersistence={},e._.merge)}(this,function(e,u){"use strict";u=u&&u.hasOwnProperty("default")?u.default:u;var r=function(){function e(){}return Object.defineProperty(e.prototype,"length",{get:function(){return Object.keys(this).length},enumerable:!0,configurable:!0}),e.prototype.key=function(e){return Object.keys(this)[e]},e.prototype.setItem=function(e,t){this[e]=t.toString()},e.prototype.getItem=function(e){return this[e]},e.prototype.removeItem=function(e){delete this[e]},e.prototype.clear=function(){for(var e=0,t=Object.keys(this);e<t.length;e++){delete this[t[e]]}},e}(),s=function(){function e(){this._queue=[],this._flushing=!1}return e.prototype.enqueue=function(e){return this._queue.push(e),this._flushing?Promise.resolve():this.flushQueue()},e.prototype.flushQueue=function(){var t=this;this._flushing=!0;var r=function(){var e=t._queue.shift();if(e)return e.then(r);t._flushing=!1};return Promise.resolve(r())},e}(),i=JSON,t=function(e){var n=this;this._mutex=new s,this.subscriber=function(t){return function(e){return t.subscribe(e)}},this.key=null!=e.key?e.key:"vuex",this.subscribed=!1,this.supportCircular=e.supportCircular||!1,this.supportCircular&&(i=require("circular-json")),this.storage=null!=e.storage?e.storage:"undefined"==typeof window?new r:window.localStorage,this.reducer=null!=e.reducer?e.reducer:null==e.modules?function(e){return e}:function(n){return e.modules.reduce(function(e,t){var r;return u(e,((r={})[t]=n[t],r))},{})},this.filter=null!=e.filter?e.filter:function(e){return!0},this.strictMode=e.strictMode||!1,this.RESTORE_MUTATION=function(e,t){for(var r=u({},e,t),n=0,s=Object.keys(r);n<s.length;n++){var i=s[n];this._vm.$set(e,i,r[i])}},this.asyncStorage=e.asyncStorage||!1;var t=this.storage&&this.storage._config;this.asyncStorage=this.asyncStorage||"localforage"===(t&&t.name),this.asyncStorage?(this.restoreState=null!=e.restoreState?e.restoreState:function(e,t){return t.getItem(e).then(function(e){return"string"==typeof e?n.supportCircular?i.parse(e||"{}"):JSON.parse(e||"{}"):e||{}})},this.saveState=null!=e.saveState?e.saveState:function(e,t,r){return r.setItem(e,"localforage"===(r&&r._config&&r._config.name)?u({},t):n.supportCircular?i.stringify(t):JSON.stringify(t))},this.plugin=function(t){n.restoreState(n.key,n.storage).then(function(e){n.strictMode?t.commit("RESTORE_MUTATION",e):t.replaceState(u(t.state,e)),n.subscriber(t)(function(e,t){n.filter(e)&&n._mutex.enqueue(n.saveState(n.key,n.reducer(t),n.storage))}),n.subscribed=!0})}):(this.restoreState=null!=e.restoreState?e.restoreState:function(e,t){var r=t.getItem(e);return"string"==typeof r?n.supportCircular?i.parse(r||"{}"):JSON.parse(r||"{}"):r||{}},this.saveState=null!=e.saveState?e.saveState:function(e,t,r){return r.setItem(e,n.supportCircular?i.stringify(t):JSON.stringify(t))},this.plugin=function(e){var t=n.restoreState(n.key,n.storage);n.strictMode?e.commit("RESTORE_MUTATION",t):e.replaceState(u(e.state,t)),n.subscriber(e)(function(e,t){n.filter(e)&&n.saveState(n.key,n.reducer(t),n.storage)}),n.subscribed=!0})};e.VuexPersistence=t,e.MockStorage=r,e.default=t,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=index.min.js.map
